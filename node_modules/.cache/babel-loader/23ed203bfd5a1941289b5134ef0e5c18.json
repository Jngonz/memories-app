{"ast":null,"code":"import _slicedToArray from\"/home/jose/Portfolio/memories-part-4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory,useLocation}from'react-router-dom';import{Avatar,AppBar,Button,Toolbar,Typography}from'@material-ui/core';import{useDispatch}from'react-redux';import decode from'jwt-decode';import memoriesLogo from'../../images/memoriesLogo.png';import memoriesText from'../../images/memoriesText.png';import*as actionType from'../../constants/actionTypes';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var history=useHistory();var location=useLocation();var logout=function logout(){// dispatch({ type: 'LOGOUT' });\ndispatch({type:actionType.LOGOUT});setUser(null);history.push('/auth');};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:classes.brandContainer,children:[/*#__PURE__*/_jsx(\"img\",{src:memoriesText,alt:\"icon\",height:\"45px\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memoriesLogo,alt:\"icon\",height:\"40\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl,children:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user.result.name}),/*#__PURE__*/_jsx(Button,{onClick:logout,variant:\"contained\",className:classes.logout,color:\"secondary\",children:\"Logout\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]});};export default Navbar;","map":{"version":3,"sources":["/home/jose/Portfolio/memories-part-4/client/src/components/Navbar/Navbar.js"],"names":["React","useState","useEffect","Link","useHistory","useLocation","Avatar","AppBar","Button","Toolbar","Typography","useDispatch","decode","memoriesLogo","memoriesText","actionType","useStyles","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","dispatch","history","location","logout","type","LOGOUT","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","image","toolbar","profile","purple","result","name","imageUrl","charAt","userName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { Avatar, AppBar, Button, Toolbar, Typography } from '@material-ui/core';\nimport { useDispatch } from 'react-redux';\nimport decode from 'jwt-decode';\n\nimport memoriesLogo from '../../images/memoriesLogo.png';\nimport memoriesText from '../../images/memoriesText.png';\nimport * as actionType from '../../constants/actionTypes';\nimport useStyles from './styles';\n\nconst Navbar = () => {\n  const classes = useStyles();\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n\n  const logout = () => {\n    // dispatch({ type: 'LOGOUT' });\n    dispatch({ type: actionType.LOGOUT });\n    setUser(null);\n    history.push('/auth');\n  };\n\n  useEffect(() => {\n    const token = user?.token;\n    if (token) {\n      const decodedToken = decode(token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n    setUser(JSON.parse(localStorage.getItem('profile')));\n  }, [location]);\n\n  return (\n    <AppBar className={classes.appBar} position='static' color='inherit'>\n      <Link to='/' className={classes.brandContainer}>\n        <img src={memoriesText} alt='icon' height='45px' />\n        <img className={classes.image} src={memoriesLogo} alt='icon' height='40' />\n      </Link>\n\n      <Toolbar className={classes.toolbar}>\n        {user ? (\n          <div className={classes.profile}>\n            <Avatar className={classes.purple} alt={user.result.name} src={user.result.imageUrl}>\n              {user.result.name.charAt(0)}\n            </Avatar>\n            <Typography className={classes.userName} variant='h6'>\n              {user.result.name}\n            </Typography>\n            <Button onClick={logout} variant='contained' className={classes.logout} color='secondary'>\n              Logout\n            </Button>\n          </div>\n        ) : (\n          <Button component={Link} to='/auth' variant='contained' color='primary'>\n            Sign In\n          </Button>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default Navbar;\n"]},"metadata":{},"sourceType":"module"}