{"ast":null,"code":"import _toConsumableArray from\"/home/jose/Portfolio/memories-part-4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/jose/Portfolio/memories-part-4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Container,Grow,Grid,Paper,AppBar,TextField,Button}from'@material-ui/core';import{useDispatch}from'react-redux';import{useHistory,useLocation}from'react-router-dom';import ChipInput from'material-ui-chip-input';import{getPostsBySearch}from'../../actions/posts';import Pagination from'../Pagination.jsx';import Form from'../Form/Form';import Posts from'../Posts/Posts';import{mergeClasses}from'@material-ui/styles';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useQuery(){return new URLSearchParams(useLocation().search);}var Home=function Home(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var query=useQuery();var history=useHistory();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var classes=useStyles();var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var searchPost=function searchPost(){if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));history.push(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{history.push('/');}};var handleKeyPress=function handleKeyPress(e){// if user press Enter Key\nif(e.keyCode===13){searchPost();}};var handleAdd=function handleAdd(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDelete=function handleDelete(tagToDelete){return setTags(tags.filter(function(tag){return tag!==tagToDelete;}));};return/*#__PURE__*/_jsx(Grow,{in:true,children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Grid,{container:true,justify:\"space-between\",alignItems:\"stretch\",spacing:3,className:mergeClasses.gridContainer,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:9,sm:6,children:/*#__PURE__*/_jsx(Posts,{setCurrentId:setCurrentId})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:3,sm:6,children:[/*#__PURE__*/_jsxs(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsx(TextField,{name:\"search\",variant:\"outlined\",label:\"Search Memories\",onKeyPress:handleKeyPress,fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/_jsx(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:handleAdd,onDelete:handleDelete,label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{disabled:!search&&tags.length===0,onClick:searchPost,variant:\"contained\",className:classes.searchButton,color:\"primary\",children:\"Search\"})]}),/*#__PURE__*/_jsx(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/_jsx(Paper,{elevation:6,className:classes.pagination,children:/*#__PURE__*/_jsx(Pagination,{page:page})})]})]})})});};export default Home;","map":{"version":3,"sources":["/home/jose/Portfolio/memories-part-4/client/src/components/Home/Home.js"],"names":["React","useState","Container","Grow","Grid","Paper","AppBar","TextField","Button","useDispatch","useHistory","useLocation","ChipInput","getPostsBySearch","Pagination","Form","Posts","mergeClasses","useStyles","useQuery","URLSearchParams","search","Home","currentId","setCurrentId","dispatch","query","history","page","get","searchQuery","classes","setSearch","tags","setTags","searchPost","trim","join","push","handleKeyPress","e","keyCode","handleAdd","tag","handleDelete","tagToDelete","filter","gridContainer","appBarSearch","target","value","margin","length","searchButton","pagination"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Container, Grow, Grid, Paper, AppBar, TextField, Button } from '@material-ui/core';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input';\n\nimport { getPostsBySearch } from '../../actions/posts';\nimport Pagination from '../Pagination.jsx';\nimport Form from '../Form/Form';\nimport Posts from '../Posts/Posts';\nimport { mergeClasses } from '@material-ui/styles';\n\nimport useStyles from './styles';\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nconst Home = () => {\n  const [currentId, setCurrentId] = useState(null);\n  const dispatch = useDispatch();\n  const query = useQuery();\n  const history = useHistory();\n  const page = query.get('page') || 1;\n  const searchQuery = query.get('searchQuery');\n  const classes = useStyles();\n  const [search, setSearch] = useState('');\n  const [tags, setTags] = useState([]);\n\n  const searchPost = () => {\n    if (search.trim() || tags) {\n      dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\n      history.push(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\n    } else {\n      history.push('/');\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    // if user press Enter Key\n    if (e.keyCode === 13) {\n      searchPost();\n    }\n  };\n\n  const handleAdd = (tag) => setTags([...tags, tag]);\n\n  const handleDelete = (tagToDelete) => setTags(tags.filter((tag) => tag !== tagToDelete));\n\n  return (\n    <Grow in>\n      <Container maxWidth='xl'>\n        <Grid container justify='space-between' alignItems='stretch' spacing={3} className={mergeClasses.gridContainer}>\n          {/* Posts Component */}\n          <Grid item xs={12} md={9} sm={6}>\n            <Posts setCurrentId={setCurrentId} />\n          </Grid>\n\n          {/* Form Component */}\n          <Grid item xs={12} md={3} sm={6}>\n            <AppBar className={classes.appBarSearch} position='static' color='inherit'>\n              <TextField\n                name='search'\n                variant='outlined'\n                label='Search Memories'\n                onKeyPress={handleKeyPress}\n                fullWidth\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n              />\n\n              <ChipInput style={{ margin: '10px 0' }} value={tags} onAdd={handleAdd} onDelete={handleDelete} label='Search Tags' variant='outlined' />\n\n              <Button\n                disabled={!search && tags.length === 0}\n                onClick={searchPost}\n                variant='contained'\n                className={classes.searchButton}\n                color='primary'>\n                Search\n              </Button>\n            </AppBar>\n\n            <Form currentId={currentId} setCurrentId={setCurrentId} />\n\n            {!searchQuery && !tags.length && (\n              <Paper elevation={6} className={classes.pagination}>\n                <Pagination page={page} />\n              </Paper>\n            )}\n          </Grid>\n        </Grid>\n      </Container>\n    </Grow>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}